---
title: 'An√°lisis de Redes sociales para alcalde de Guayaquil 2019'
date: '2019-03-21'
tags: ['pytorch', 'machine learning', 'software', 'espa√±ol']
draft: false
summary: 'TensorFlow, lanzado en 2015 por Google, simplifica el desarrollo de redes neuronales con soporte para GPU y diversas plataformas, y su integraci√≥n con Keras facilita la creaci√≥n de modelos.'
---

<blockquote>
  Hace mucho que no escribo, pero realmente fue una combinaci√≥n de falta de tiempo y falta de
  noticias controversiales pol√≠ticas, y que sean de mi inter√©s.
</blockquote>

El d√≠a del cierre de campa√±a vamos a analizar el movimiento y el impacto de los candidatos para el per√≠odo 2019 de alcalde de la ciudad de Guayaquil, agregando un poco de Inteligencia Artificial para analizar qu√© hablan las personas sobre ellos. Pero primero conozcamos a los 17 candidatos a la alcald√≠a, que por cierto nunca hab√≠amos tenido tantos para una elecci√≥n seccional.

![Papeleta elecciones alcalde Guayaquil 2019](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_1.png)

De los 17, solo de 14 encontr√© una cuenta en Twitter de los cuales: Jorge Copiano, Octavio S√πarez, Carlos Cassanello,¬† alguien deber√≠a decirles que existen las redes sociales o deber√≠an crear un username que tenga relaci√≥n con su nombre y se los pueda encontrar. Adicionalmente a los 17 participantes decid√≠ ver quien m√°s merec√≠a entrar en este an√°lisis, para lo cual el primero que busqu√© fue a ‚ÄúSarmiento Es Pueblo‚Äù, pero al parecer solo se limita a poner su nombre en las propagandas pol√≠ticas y dej√≥ de usar redes sociales luego de apoyar a la ‚ÄúRevoluci√≥n Ciudadana‚Äù. Despu√©s decid√≠ agregar al siguiente sujeto que hace campa√±as pero no es candidato a nada, a Jaime Nebot, y la raz√≥n fue porque #YOLO. Mentira, creo que es importante analizarlo para entender la posici√≥n de su partido, es el actual alcalde y por cierto terminaremos descubriendo en este post porque acompa√±a tanto y hace tanta campa√±a con sus candidatos de Madera de Guerreros.

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  <img
    src="/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_2.gif"
    alt="Gif bailando!"
    style={{ maxWidth: '100%', height: 'auto' }}
  />
  Sarmiento es Pueblo es la sensaci√≥n de cada fiesta electoral porque baila con el feo, con la rata
  y con el guapo.
</div>

## Dataset

El dataset es la colecci√≥n de datos, para este an√°lisis de todos los tweets que mencionan a las cuentas de los candidatos y al invitado especial. La recolecci√≥n empez√≥ el jueves 14 de marzo y termin√≥ en la madrugada del 21 de marzo (Casi continua, alg√∫n momento de toda la semana dej√≥ de capturar por un par de horas).

Pd. ¬°Si no eres desarrollador de software no tengas miedo, que si podr√°s entenderlo!

Veamos que columnas fueron capturados:

### Columnas

<code>print(df.columns)</code>
<pre>
  Index(['ID', 'creado_en', 'nombreusuario', 'nombre', 'creacion_usuario', 'seguidores',
  'siguiendo', 'numero_tweets', 'geolocalziacion_habilitada', 'idioma', 'origen',
  'idioma_del_tweet', 'tweet', 'hashtags', 'es_respuesta', 'jimmyjairala', 'cedeno_marth',
  'jorgevillacrese', 'CynthiaViteri6', 'GinoCornejoM', 'BermudezBronson', 'balerioestacio',
  'inca_jose', 'EduardoArgudoG', 'fcojimenez21', 'patobuendia23', 'jaimelomas74', 'Simon_BolivarEC',
  'edgarsalazar_51', 'jaimenebotsaadi'], dtype='object')
</pre>
### Cantidad de registros El primer valor es la cantidad de registros o filas y la segunda la
cantidad de columnas
<code>print(df.shape)</code>
<code>(11230, 30)</code>
## Analicemos nuestro Dataset ### Tweets vs Retweets Vamos a ver cuantos son tweets √∫nicos y cuantos
son retweets:

![Tweets vs retweets](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_3.png)

Se ve claramente que existe m√°s interacci√≥n en compartir un contenido que postear un contenido. Pero a mi parecer (solo por an√°lisis visual) existen muchas cuentas sospechosas que les dan RT √∫nicamente a ciertos candidatos con muy pocos seguidores o hasta sin foto de perfil, pero bueno cada cual tiene derecho de tener su cuenta como quiera y hay que recordar esta red social es el nido del odio.

### Menciones

Veamos quien es el m√°s famoso en las redes, a quien le pasan escribiendo y etiquetando (Por cierto adivinan quien esta en 4to lugar?)

![menciones!](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_4.png)

<div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
  <img
    src="/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_5.gif"
    alt="Ganador de menciones!"
    style={{ maxWidth: '100%', height: 'auto' }}
  />
  Felicidades Jimmy, tenemos un ganador!
</div>
Definitivamente Jimmy se lleva a todos y por bastante, al parecer es el m√°s hablado en las redes
sociales y mencionado. Lo cual no me sorprende, viene haciendo campa√±a en redes sociales desde las
elecciones a presidente donde <del>ofrec√≠a</del> presentaba a sus hijos como si el streaming de
facebook live fuera TVentas.

Al parecer Nebot opaca un poco a su candidata Cynthia, pero tiene sentido mucho de sus menciones son para denunciar problemas que se ven actualmente en la ciudad de Guayaquil. Al resto creo que deber√≠an pensar conseguir un mejor Community Mananger o pedir ayudar al troll center de B√©lgica.

Al candidato que no quiero mencionar que dijo ‚ÄúEstas elecciones hay candidatos que visitan a la gente y candidatos solo redes sociales‚Äù parece que hasta en eso est√° equivocado o hablaba de √©l. Luego de ver el impacto de los 17 candidatos, vamos a analizar solo los que tiene un n√∫mero considerado de interacci√≥n, a la final ¬øQuien recuerda m√°s de 5 candidatos de la lista inicial?

### Seguidores de los que interactuan

Despu√©s del gobierno de los trolls centers, pensamos que todo pol√≠tico tiene uno. Este an√°lisis no dir√° que, si los tiene o no los tienen, pero vamos a dejar unos gr√°ficos para que el lector pueda interpretarlos y concluir.

#### Gr√°fico de los seguidores por cada usuario que interactu√≥

![grafico de seguidores que interactuaron!](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_6.png)

#### Gr√°fico de los seguidores por cada usuario que interactuo por candidatos

![graficos de seguidores!](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_7.jpg)

### Hora que interactuan los usuarios

<span>
  Ni yo lo pude creer, la cantidad de personas que pasa en redes sociales en las noches. Al parecer
  antes de dormir es costumbre enviar tu tweet de apoyo o de odio a tu pr√≥ximo alcalde.
</span>

Pd. Si te toca mesa espero que duermas temprano el d√≠a anterior, si no tendr√°s una multa de $59.10 m√°s $47.40 si no votaste.

<span>
  <img
    className="aligncenter wp-image-533 size-full"
    src="https://wgcv.me/wp-content/uploads/2019/03/tweet_por_hora.png"
    alt=""
    width="972"
    height="532"
  />
  .
</span>
#### Gr√°fico hora de los tweets por candidatos ![grafico por
horas!](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_8.png)

¬øO todos contrataron troll center nocturno para abaratar costos o Guayaquil se mueve de noche, realmente quien quiere echar odio o apoyar con el calor que hace las 12 del d√≠a? Mejor cuando ya estas c√≥modo en tu cuarto. (A criterio personal, como dije en la parte superior creo que si existe un boost social media engagement en cuanto a Retweets, me imagino que a esta hora los ponen a funcionar para disimularlo al d√≠a siguiente).

Por cierto, Cynthia, deja de llegar a casa a las 20h00 y desconectarte de la pol√≠tica, quiz√°s por eso no tienes interacciones, Guayaquil reci√©n empieza¬†a expresarse a esa hora.

## Analicemos los sentimientos

¬°¬øComo que analicemos los sentimientos?! ¬øAcaso vamos a poner al loco del √°tico a clasificar si es positivo o negativo cada tweet?

Como es normal en mi blog combinar pol√≠tica, fuego y tecnolog√≠a y a veces hasta otros temas, vamos a analizar los sentimientos de cada uno de los tweets mediante inteligencia artificial para lo cual explicar√© un poco en este post. (Si solo quieres ver n√∫meros baja hasta ver el gr√°fico, porque hablare mucho de AI).

La inteligencia artificial tiene diferentes ramas, m√°s ramas y sub-ramas, pero las dos principales podr√≠amos decir que son Machine Learning y DeepLearning (de lo cual¬† Deeplearning realmente es una sub-rama de Machine learning). El DeepLearning es la forma de crear AI con redes neuronales, la cual trata de simular al cerebro humano (B√°sicamente son matrices multiplicando matrices, usando funciones de activaci√≥n y conectando a otras matrices con funciones de activaci√≥n). Si quieres leer m√°s sobre Inteligencia Artificial.

Dentro de las redes neuronales, podemos encontrar las RNN (Recurrent Neural Network) y dentro de las RRN encontramos las LSTMs (Long Short Term Memory networks ) para descubr√≠ que no tiene traducci√≥n as√≠ que dejar√© la m√≠a LSTMs (Red de Memoria de Corto plazo), esta clase de red es excelente para operaciones que tienen que tener un historial en el tiempo como el trading y porque no el lenguaje, porque cada palabra va conectada con otra y cambia el significado si unimos diferente palabras.

Para poder clasificar los tweets en positivo y negativo, primero vamos a crear una red LSTMs que pueda entender el idioma espa√±ol, lo cual llevar√≠a algunas horas (o d√≠as, dependiendo el presupuesto para la GPu) entren√°ndola, as√≠ que usare model-eswiki-30k (Siempre es mejor usar algo que alguien m√°s entren√≥ antes de entrenar algo ustedes, as√≠ ganan la experiencia anterior), este modelo est√° basado en WikiText-103 de Saleforce pero para el idioma espa√±ol (Si se preguntan es pyTorch pero hay forma de exportarlo TF).

Un momento, wikipedia es una enciclopedia y tiene un lenguaje muy formal, ¬øComo es posible que entienda el lenguaje de los guayaquile√±os? Definitivamente no va a ser muy preciso, as√≠ que vamos a entrenar con nuestros tweets dicho modelo y mejorar la predicci√≥n de la siguientes N palabras.
Con una sola entrenada obtenemos un accuracy bastante alto de 0.314 (Claro alto para lo que estamos midiendo, la siguiente palabra de una oraci√≥n)

<pre>epoch train_loss valid_loss accuracy time 0 5.099202 3.970043 0.314598 00:14</pre>

Algunos entrenamientos m√°s, estoy m√°s satifecho con el accuracy, al parecer escribir un tweet es bastante sencillo. ‚úåüèª

<pre>
  Total time: 03:03 epoch train_loss valid_loss accuracy time 0 3.937126 3.578753 0.354821 00:18 1
  3.579814 3.021521 0.446741 00:18 2 3.168866 2.618203 0.509643 00:18 3 2.799575 2.372685 0.555268
  00:18 4 2.515592 2.227562 0.578438 00:18 5 2.303267 2.134162 0.594196 00:18 6 2.143560 2.081303
  0.602679 00:18 7 2.019376 2.051470 0.607232 00:18 8 1.956064 2.042516 0.609821 00:18 9 1.929175
  2.042511 0.609688 00:18
</pre>

### Entonces¬†¬øQu√© hace mi modelo?

El modelo actual predice la siguiente palabra, esto me servir√° para poder entender el contexto de toda la oraci√≥n y no cada palabra.

Esto significa puedo darle unas cuantas palabras para que escriba algo (Si literal, el modelo escribe)

<pre>
  TEXT = "La ciudad de Guayaquil" N_WORDS = 20 N_SENTENCES = 2 print("\n".join(learn.predict(TEXT,
  N_WORDS, temperature=0.75) for _ in range(N_SENTENCES)))
</pre>

Como los candidatos son para la Ciudad de Guayaquil, empecemos nuestra oraci√≥n "La ciudad de Guayaquil" y vemos que genera nuestro modelo (Creo que nunca veremos trabajar dos pol√≠ticos de la mano pero mi modelo s√≠):

<pre>
  La ciudad de Guayaquil tambi√©n se viste de naranja y sue√±a con # elmejorguayaquildetodoslostiempos
  con @jimmyjairala y el equipo de @la6mdg xxbos RT La ciudad de Guayaquil se salv√≥ del Socialismo
  de SXXI . Fue el basti√≥n que nunca se pudieron tomar .
</pre>

### Clasificaci√≥n

Una vez entrenado mi modelo que entiende como las personas habla de pol√≠tica vamos a crear un clasificador, para que me digan si es el tweet es bueno o malo. Para esto me toc√≥ a m√≠ y la comunidad de AI Saturdays leer y clasificar los tweets si eran positivos o negativos, luego de eso entrenar el modelo.

Con un accuracy final de 0.85% (Utilizando una relaci√≥n de 80% entrenamiento 20% prueba). Esto quiere decir de cada 10 tweets, 1 tweet y medio podr√≠a estar mal clasificado, seguramente el tweet es bastante ambiguo.

<pre>
  epoch train_loss valid_loss accuracy time 0 0.355888 0.449902 0.834437 00:03 1 0.337926 0.415722
  0.854305 00:03
</pre>

## En serio, puedes saber si mi tweet es positivo o negativo!?

Algunos ejemplos clasificados por el modelo:

<pre>
  learn.predict("Vamos a ganar mi alcalde") (Category P, tensor(1), tensor([0.0649, 0.9351]))
  learn.predict("Los mismos ladrones de siempre") (Category N, tensor(0), tensor([0.7378, 0.2622]))
  learn.predict("üê≠üê≠") (Category N, tensor(0), tensor([0.6929, 0.3071])) learn.predict("Es hora de
  un cambio") (Category P, tensor(1), tensor([0.4567, 0.5433])) learn.predict("Sinico, ladr√≥n")
  (Category N, tensor(0), tensor([0.7175, 0.2825])) learn.predict("Tenemos el optimismo y convicci√≥n
  que el pueblo respaldar√° masivamente la propuesta de ") (Category P, tensor(1), tensor([0.0348,
  0.9652])) learn.predict("no invierten nada . Porque si no les resulta el fraude y ganar las
  alcald√≠as que deseen en especial")[0] Category N
</pre>

Una vez entrenado y con nuestro modelo funcionando, nos toca predecir cada tweet, tabularlos y ponerlos en un gr√°fico.

## Tweets Positivos Vs Tweets Negativos

![Twetts positivos vs negativos](/static/images/content/2023/analisis_datos_elecciones_municipio_guayaquil/asm_10.png)

Se puede ver los dos candidatos principales tienen una mayor cantidad de tweets negativos que de positivos y que¬†<del>el t√≠tere</del>¬† la candidata de la lista de la alcald√≠a se lleva los comentarios negativos del periodo actual, mientras con Jimmy existe un desprecio y amor entre sus usuarios.

Lo interesante es ver como Jaime parece un tercer candidato, claro teniendo bastantes comentarios negativos mencionando problemas actuales de la ciudad o relaciones pol√≠ticas con otros del gobierno, pero tambi√©n se ve un apoyo para una candidatura de presidente la cual a√∫n no es mencionada por √©l, pero si en sus usuarios apoyando dicha decisi√≥n.

Claro esta, que la realidad de las urnas no se miden en las redes sociales ni en internet. Para los niveles sociales altos se miden tomando un caf√© y hablando de pol√≠tica que nunca llegar√° a un tweet, y en los estratos bajos por las camisetas que regalaron (No es literal, ni se habla de toda la poblaci√≥n de segmento), esto me lo dej√≥ claro en la √∫ltima encuesta online de las elecciones presidenciales.

## Recursos

<strong>Jupyter Notebook:</strong>

https://colab.research.google.com/drive/17iqKSf5KRSSo3M7PsY74a7a6y4qjtZ1f

<strong>Dataset:</strong>

https://drive.google.com/open?id=1-Ynl7kCl-k16KV2xvgqDum6SMU_TuO3q

https://drive.google.com/open?id=1hY1dIGnCcrvUxPZYlW4cu_6mEllYLJhZ-OsiqarMhe0

Gracias a Salvatierra, Jorge y la Comunidad Ai.
